// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Fs from "fs";
import * as Curry from "rescript/lib/es6/curry.js";
import * as Js_promise from "rescript/lib/es6/js_promise.js";
import * as Belt_Option from "rescript/lib/es6/belt_Option.js";

function callbackWithResult(f) {
  return function (error, result) {
    if (!(error == null)) {
      return Curry._1(f, {
                  TAG: /* Error */1,
                  _0: error
                });
    }
    if (!(result == null)) {
      return Curry._1(f, {
                  TAG: /* Ok */0,
                  _0: result
                });
    }
    throw {
          RE_EXN_ID: "Invalid_argument",
          _1: "nodeCallback arguments invalid",
          Error: new Error()
        };
  };
}

function onResult(result) {
  var message;
  message = result.TAG === /* Ok */0 ? "Success: " + result._0 : "Error: " + Belt_Option.getWithDefault(result._0.message, "Unknown");
  console.log(message);
}

Fs.readFile("hello.txt", "UTF-8", callbackWithResult(onResult));

function callbackWithSuccessOrError(onSuccess, onError) {
  return function (error, result) {
    if (!(error == null)) {
      return Curry._1(onError, error);
    }
    if (!(result == null)) {
      return Curry._1(onSuccess, result);
    }
    throw {
          RE_EXN_ID: "Invalid_argument",
          _1: "nodeCallback arguments invalid",
          Error: new Error()
        };
  };
}

function onSuccess(result) {
  var message = "Success: " + result;
  console.log(message);
}

function onError(error) {
  var message = "Error: " + Belt_Option.getWithDefault(error.message, "Unknown");
  console.log(message);
}

Fs.readFile("hello.txt", "UTF-8", callbackWithSuccessOrError(onSuccess, onError));

function callbackWithPromise(f) {
  return function (error, result) {
    if (error == null) {
      if (result == null) {
        return Curry._1(f, Promise.reject({
                        RE_EXN_ID: "Failure",
                        _1: "nodeCallback arguments invalid"
                      }));
      } else {
        return Curry._1(f, Promise.resolve(result));
      }
    }
    var message = Belt_Option.getWithDefault(error.message, "Unknown");
    Curry._1(f, Promise.reject({
              RE_EXN_ID: "Failure",
              _1: message
            }));
  };
}

function handlePromise(promise) {
  var __x = Js_promise.then_((function (result) {
          return Promise.resolve("Success: " + result);
        }), promise);
  var __x$1 = Js_promise.$$catch((function (_error) {
          return Promise.resolve("Error: Unknown");
        }), __x);
  Js_promise.then_((function (message) {
          console.log(message);
          return Promise.resolve(undefined);
        }), __x$1);
}

Fs.readFile("hello.txt", "UTF-8", callbackWithPromise(handlePromise));

export {
  callbackWithResult ,
  onResult ,
  callbackWithSuccessOrError ,
  onSuccess ,
  onError ,
  callbackWithPromise ,
  handlePromise ,
}
/*  Not a pure module */
